import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.join.js";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import{easeExpOut}from"d3-ease";import{pointer}from"d3";export function createTooltip(svg,props){var offsetX=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,offsetY=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,Tooltip=svg.append("g").attr("pointer-events","none");return{showTooltip:function showTooltip(event,d){Tooltip.transition().attr("transform","translate(\n        ".concat(pointer(event,event.target)[0]+offsetX,",\n        ").concat(pointer(event,event.target)[1]-15+offsetY,"\n      )")).duration(500).ease(easeExpOut);var path=Tooltip.selectAll("path").data([,]).join("path").attr("fill","#ffffffE6").attr("stroke","rgba(0, 20, 60, .2)").attr("stroke-linejoin","round").attr("stroke-linecap","round"),text=Tooltip.selectAll("text").data([,]).join("text").style("font-size",props.font.size).call(function(text){return text.selectAll("tspan").data("".concat(props.tooltip.mapper(d)).split(/\n/)).join("tspan").attr("x",0).attr("y",function(_,i){return"".concat(1.5*i,"em")}).attr("font-weight",function(_,i){return i?null:"bold"}).attr("fill","black").text(function(d){return d})});Tooltip.selectAll("path").attr("d",null);var textNode=text.node(),textBox=null===textNode?{width:0,height:0}:textNode.getBBox(),width=textBox.width,height=textBox.height;text.attr("transform","translate(".concat(-width/2,", ").concat(-height+7,")")),path.attr("d","M".concat(-width/2-5,",5\n      H-5\n      l5,5\n      l5,-5\n      H").concat(width/2+5,"\n      v").concat(-height-15,"\n      h-").concat(width+10,"\n      z\n    "))},moveTooltip:function moveTooltip(event){Tooltip.transition().attr("opacity",1).attr("transform","translate(\n        ".concat(pointer(event,event.target)[0]+offsetX,",\n        ").concat(pointer(event,event.target)[1]-15+offsetY,"\n      )")).duration(500).ease(easeExpOut)},hideTooltip:function hideTooltip(){Tooltip.transition().attr("opacity",0).duration(500).ease(easeExpOut)},Tooltip:Tooltip}}